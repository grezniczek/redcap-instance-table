{
    "name": "Instance Table",
    "namespace": "MCRI\\InstanceTable",
    "authors": [
        {
            "name": "Luke Stevens",
            "email": "luke.stevens@mcri.edu.au",
            "institution": "Murdoch Children's Research Institute"
        }
    ],
    "description": "Use the action tag <code>@INSTANCETABLE=form_name</code> in a descriptive text field to include a table showing data from repeat instances of that form.<br>If project is longitudinal, use <code>@INSTANCETABLE=event_name:form_name</code> to specify the event and form (can be a repeating form or a form in a repeating event).<br>Other action tags are available for controlling cetain properties of te tables and their contents.",
    "framework-version": 15,
    "auth-ajax-actions": [ "get-data" ],
    "action-tags": [
        {
            "tag": "@INSTANCETABLE",
            "description": "Tag <code>@INSTANCETABLE=form_name</code> in a descriptive text field to include a table showing data from repeat instances of that form."
        },
        {
            "tag": "@INSTANCETABLE_HIDE",
            "description": "Ignore this field in instance all tables."
        },
        {
            "tag": "@INSTANCETABLE_LABEL",
            "description": "Tag @INSTANCETABLE_LABEL='column header': Provide an alternative column title for the field in all instance tables."
        },
        {
            "tag": "@INSTANCETABLE_HIDEADD",
            "description": "Suppress the \"+ Add New\" button on data entry forms."
        },
        {
            "tag": "@INSTANCETABLE_HIDEINSTANCECOL",
            "description": "Hide the '#' column containing instance numbers."
        },
        {
            "tag": "@INSTANCETABLE_VARLIST",
            "description": "Use, for example, <code>@INSTANCETABLE_VARLIST=rptfrmvar3,rptfrmvar1,rptfrmvar6,rptfrm_complete</code> to include only the variables from the repeating form that appear in the comma-separated list. Also sets the order of columns in the table rather (default is the order of fields from the form)."
        },
        {
            "tag": "@INSTANCETABLE_PAGESIZE",
            "description": "Override default choices for page sizing: specify integer default page size, or -1 for 'All'"
        },
        {
            "tag": "@INSTANCETABLE_FILTER",
            "description": "Use <code>@INSTANCETABLE_FILTER='[v]=1'</code> to specify a logic expression to show only instances that match the filter expression. You can pipe in fields from the instrument the instance table is on by using curly braces: <code>@INSTANCETABLE_FILTER='[field_on_repeating_form]={field_on_this_form}'</code>. When you use this, both the <code>@INSTANCETABLE_REF</code> <u>and</u> <code>@INSTANCETABLE_REF_SOURCE</code> must be set in order for the \"+ Add new\" button to work."
        },
        {
            "tag": "@INSTANCETABLE_REF",
            "description": "Where you have an instance table on a repeating form that is referencing another repeating form, use <code>@INSTANCETABLE_REF=fieldname</code> to have the instances filtered to show only those where the current instance number is saved in a field on the referenced repeating form. For example, an instance table in a repeating 'Visit' form may be configured to show only instances of the repeating 'Medication' form where the current Visit instance is selected in the visitref field on the Medication form: <code>@INSTANCETABLE @INSTANCETABLE_REF=visitref</code>."
        },
        {
            "tag": "@INSTANCETABLE_REF_SOURCE",
            "description": "When you use <code>@INSTANCETABLE_REF</code>, the default link between sets of repeating fields is the instance number. Use this action tag to have another field from the instrument the instance table is on to serve as this linking element. The instrument must have been saved before the \"+ Add new\" button becomes available. While a saved instrument exists that references the field's value, the field becomes read only (i.e., it behaves as if the <code>@READONLY</code> action tag was applied."
        },
        {
            "tag": "@INSTANCETABLE_ADDBTNLABEL",
            "description": "Use <code>@INSTANCETABLE_ADDBTNLABEL='Button Label'</code> to specify an alternative label for the \"Add New Instance\" button (\"New Medication\", \"Add new instance\" etc.)."
        },
        {
            "tag": "@INSTANCETABLE_HIDECHOICEVALUES",
            "description": "Use <code>@INSTANCETABLE_HIDECHOICEVALUES</code> to suppress the display of choice field values and show only choice labels."
        },
        {
            "tag": "@INSTANCETABLE_HIDEFORMSTATUS",
            "description": "Use <code>@INSTANCETABLE_HIDEFORMSTATUS</code> to suppress the display of the form status field in data entry view. (The form status field is always suppressed in survey mode.)"
        }
    ],
    "system-settings": [ ],
    "project-settings": [ ]
}
